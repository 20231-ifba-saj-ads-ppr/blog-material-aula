import{_ as o}from"./plugin-vue_export-helper-c27b6911.js";import{r as t,o as c,c as p,a,b as n,d as i,e as s}from"./app-67d2117b.js";const l={},u=s('<h1 id="singleton-gof" tabindex="-1"><a class="header-anchor" href="#singleton-gof" aria-hidden="true">#</a> Singleton (GOF)</h1><p>[^GAMMA]</p><p>O padrão de projeto Singleton é um padrão de criação que garante a existência de apenas uma instância de uma determinada classe em todo o sistema, fornecendo um ponto de acesso global a essa instância.</p><h2 id="motivacao" tabindex="-1"><a class="header-anchor" href="#motivacao" aria-hidden="true">#</a> Motivação</h2><p>A motivação para o uso do padrão Singleton é garantir que apenas uma única instância de uma classe seja criada em todo o sistema. Isso pode ser útil em cenários em que uma classe representa um recurso compartilhado, como um pool de conexões de banco de dados, um cache de objetos ou um gerenciador de configurações. Além disso, o Singleton pode ser usado para limitar o número de instâncias de uma classe (Multiton), o que pode ser útil em cenários em que a criação de várias instâncias pode ter um impacto negativo no desempenho ou na utilização de recursos do sistema.</p><h2 id="aplicabilidade" tabindex="-1"><a class="header-anchor" href="#aplicabilidade" aria-hidden="true">#</a> Aplicabilidade</h2><p>O padrão Singleton é aplicável em situações em que é necessário garantir que apenas uma única instância de uma classe seja criada em todo o sistema. Alguns exemplos de uso do padrão Singleton incluem:</p><ul><li>Criação de objetos que representam recursos compartilhados, como bancos de dados, arquivos de log ou cache de objetos.</li><li>Gerenciamento de configurações do sistema, garantindo que apenas uma única instância do objeto de configuração seja criada e usada em todo o sistema.</li><li>Controle de acesso a um recurso compartilhado, garantindo que apenas uma única instância do objeto de controle de acesso seja criada em todo o sistema.</li></ul><h2 id="estrutura" tabindex="-1"><a class="header-anchor" href="#estrutura" aria-hidden="true">#</a> Estrutura</h2><p>A estrutura do padrão Singleton é composta por uma única classe, que é responsável por garantir a criação de apenas uma única instância dessa classe em todo o sistema. A seguir, é apresentado um diagrama de classes UML que ilustra a estrutura do padrão Singleton:</p><figure><img src="https://www.plantuml.com/plantuml/svg/SoWkIImgAStDuNA0iv9p4ekB5O8pyz9pKaloynIgkHI0G1SeNvAPh92P1sJa9QTQ8LH0vE5S3KsmW3PKGtfgYITKZuOckYxjulpSLD_Kaepy5A2sMYw7rBmKi6iWD000" alt="uml diagram"><figcaption>Estrutura do Singleton</figcaption></figure><p>O diagrama mostra que a classe Singleton tem um método estático <code>getInstance()</code> que é responsável por garantir que apenas uma única instância da classe seja criada em todo o sistema. O construtor da classe é definido como privado, garantindo que a classe só possa ser instanciada a partir do próprio método <code>getInstance()</code>. A classe também possui um método <code>someMethod()</code> que pode ser usado para acessar o comportamento da instância Singleton.</p><h2 id="participantes" tabindex="-1"><a class="header-anchor" href="#participantes" aria-hidden="true">#</a> Participantes</h2><p>Os participantes do padrão Singleton são:</p><ul><li>Singleton: é a classe que representa o objeto que deve ter apenas uma única instância em todo o sistema. A classe geralmente define um método estático <code>getInstance()</code> que é responsável por garantir a criação da única instância e por fornecer um ponto de acesso global a essa instância.</li></ul><h2 id="colaboracoes" tabindex="-1"><a class="header-anchor" href="#colaboracoes" aria-hidden="true">#</a> Colaborações</h2><p>O padrão Singleton geralmente não tem colaborações com outras classes. A classe Singleton é responsável por garantir a criação de apenas uma única instância da classe em todo o sistema e por fornecer um ponto de acesso global a essa instância.</p><h2 id="consequencias" tabindex="-1"><a class="header-anchor" href="#consequencias" aria-hidden="true">#</a> Consequências</h2><p>O padrão Singleton apresenta vários benefícios:</p>',19),r=a("li",null,"Acesso controlado à instância única. Como a classe Singleton encapsula a sua única instância, possui controle total sobre como e quando os clientes a acessam.",-1),d=a("li",null,"Espaço de nomes reduzido. O padrão Singleton representa uma melhoria em relação ao uso de variáveis globais. Ele evita a poluição do espaço de nomes com variáveis globais que armazenam instâncias únicas.",-1),m=a("li",null,"Permite um refinamento de operações e da representação. A classe Singleton pode ter subclasses e é fácil configurar uma aplicação com uma instância dessa classe estendida. Você pode configurar a aplicação com uma instância da classe de que necessita em tempo de execução.",-1),k={href:"/nao_gof/ObjectPool",target:"_blank",rel:"noopener noreferrer"},v=a("li",null,"Mais flexível do que operações de classe. Uma outra maneira de empacotar a funcionalidade de um singleton é usando operações de classe (ou seja, funções-membro estáticas em C++ ou métodos de classe em Smalltalk). Porém, as técnicas de ambas as linguagens tornam difícil mudar um projeto para permitir mais que uma instância de uma classe. Além disso, as funções- membro estáticas em C++ nunca são virtuais, o que significa que as subclasses não podem redefini-las polimorficamente.",-1),b=s(`<h2 id="implementacao" tabindex="-1"><a class="header-anchor" href="#implementacao" aria-hidden="true">#</a> Implementação</h2><p>Existem diferentes maneiras de implementar o padrão Singleton, mas a ideia básica é sempre garantir que apenas uma única instância da classe seja criada em todo o sistema.</p><p>Uma implementação típica do padrão Singleton em Java pode ser a seguinte:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token comment">// Instância estática da classe Singleton</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>
    
    <span class="token comment">// Construtor privado para evitar a criação de instâncias da classe fora dela mesma</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// Método estático que retorna a única instância da classe Singleton</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// Métodos da classe Singleton</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Nesta implementação, a classe Singleton define um construtor privado que garante que a classe só possa ser instanciada a partir do próprio método <code>getInstance()</code>. A classe também tem uma variável estática <code>instance</code> que armazena a única instância da classe. O método <code>getInstance()</code> é responsável por garantir que apenas uma única instância da classe seja criada em todo o sistema, verificando se a variável <code>instance</code> já foi inicializada. Se a variável ainda não foi inicializada, o método cria uma nova instância da classe e a atribui à variável <code>instance</code>. Em seguida, o método retorna a instância criada ou a instância já existente.</p><p>O uso do padrão Singleton é simples e pode ser feito de forma transparente para o usuário da classe. Para obter a única instância da classe Singleton, basta chamar o método estático <code>getInstance()</code>. Por exemplo:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Singleton</span> instance <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
instance<span class="token punctuation">.</span><span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>É importante observar que a implementação do padrão Singleton deve ser cuidadosa para evitar problemas com concorrência, ou seja, garantir que a criação da instância seja feita de forma segura em ambientes multi-threaded. Para isso, pode ser necessário usar sincronização ou outras técnicas para garantir a segurança da implementação.</p><p>Uma sugestão de implementação para evita o problema do Singleton no multi-threaded é instanciar o objeto na própria declaração do atributo.</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token comment">// Instância estática da classe Singleton</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Construtor privado para evitar a criação de instâncias da classe fora dela mesma</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// Método estático que retorna a única instância da classe Singleton</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// Métodos da classe Singleton</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="multiton" tabindex="-1"><a class="header-anchor" href="#multiton" aria-hidden="true">#</a> Multiton</h2><p>Permitir a criação de uma quantidade limitada de instâncias de determinada classe e fornecer um modo para recuperá-las. [^K19]</p><p>O java implementa através do ENUM;</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Tema</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> nome <span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Color</span> corDoFundo <span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Color</span> corDaFonte <span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Map</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Tema</span><span class="token punctuation">&gt;</span></span> temas <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Tema</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">SKY</span> <span class="token operator">=</span> <span class="token string">&quot;Sky&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">FIRE</span> <span class="token operator">=</span> <span class="token string">&quot;Fire&quot;</span> <span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token class-name">Tema</span> tema1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tema</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
        tema1<span class="token punctuation">.</span><span class="token function">setNome</span><span class="token punctuation">(</span> <span class="token class-name">Tema</span><span class="token punctuation">.</span><span class="token constant">SKY</span> <span class="token punctuation">)</span> <span class="token punctuation">;</span>
        tema1<span class="token punctuation">.</span><span class="token function">setCorDoFundo</span><span class="token punctuation">(</span> <span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">BLUE</span> <span class="token punctuation">)</span> <span class="token punctuation">;</span>
        tema1<span class="token punctuation">.</span><span class="token function">setCorDaFonte</span><span class="token punctuation">(</span> <span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">BLACK</span> <span class="token punctuation">)</span> <span class="token punctuation">;</span>
        <span class="token class-name">Tema</span> tema2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tema</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
        tema2<span class="token punctuation">.</span><span class="token function">setNome</span><span class="token punctuation">(</span> <span class="token class-name">Tema</span><span class="token punctuation">.</span><span class="token constant">FIRE</span> <span class="token punctuation">)</span> <span class="token punctuation">;</span>
        tema2<span class="token punctuation">.</span><span class="token function">setCorDoFundo</span><span class="token punctuation">(</span> <span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">RED</span> <span class="token punctuation">)</span> <span class="token punctuation">;</span>
        tema2<span class="token punctuation">.</span><span class="token function">setCorDaFonte</span><span class="token punctuation">(</span> <span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">WHITE</span> <span class="token punctuation">)</span> <span class="token punctuation">;</span>
        temas<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span> tema1<span class="token punctuation">.</span><span class="token function">getNome</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">,</span> tema1 <span class="token punctuation">)</span> <span class="token punctuation">;</span>
        temas<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span> tema2<span class="token punctuation">.</span><span class="token function">getNome</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">,</span> tema2 <span class="token punctuation">)</span> <span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token class-name">Tema</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Tema</span> <span class="token function">getInstance</span><span class="token punctuation">(</span> <span class="token class-name">String</span> nomeDoTema <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Tema</span><span class="token punctuation">.</span>temas<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span> nomeDoTema <span class="token punctuation">)</span> <span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// GETTERS AND SETTERS privates</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Tema</span> <span class="token punctuation">{</span>
    <span class="token function">SKY</span><span class="token punctuation">(</span><span class="token string">&quot;Sky&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">BLUE</span><span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">FIRE</span><span class="token punctuation">(</span><span class="token string">&quot;Fire&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">WHITE</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> nome <span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Color</span> corDoFundo <span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Color</span> corDaFonte <span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Tema</span><span class="token punctuation">(</span><span class="token class-name">String</span> nome<span class="token punctuation">,</span> <span class="token class-name">Color</span> corDoFundo <span class="token punctuation">,</span>  <span class="token class-name">Color</span> corDaFonte <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>nome<span class="token operator">=</span>nome <span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>corDoFundo<span class="token operator">=</span>corDoFundo <span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>corDaFonte<span class="token operator">=</span>corDaFonte <span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// GETTERS </span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="referencias" tabindex="-1"><a class="header-anchor" href="#referencias" aria-hidden="true">#</a> Referências</h2><p>!!!include(src/ref.md)!!!</p>`,17);function g(h,f){const e=t("ExternalLinkIcon");return c(),p("div",null,[u,a("ol",null,[r,d,m,a("li",null,[n("Permite um número variável de instâncias. O padrão torna fácil mudar de idéia, permitindo mais de uma instância da classe Singleton. Além disso, você pode usar a mesma abordagem para controlar o número de instâncias que a aplicação utiliza. Somente a operação que permite acesso à instância de Singleton necessita ser mudada(Multiton), "),a("a",k,[n("Object Pool"),i(e)]),n(").")]),v]),b])}const y=o(l,[["render",g],["__file","Singleton.html.vue"]]);export{y as default};
